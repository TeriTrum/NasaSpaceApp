/* ===== Theme ===== */
:root{
  --bg:#0b1220; --fg:#e6edf3; --muted:#9aa4b2;
  --panel:#0f1115; --border:#203052;
  --mapW: clamp(360px, 32vw, 520px);
  --mapH: 520px; /* sẽ được JS cập nhật để chạm tới nút Tải CSV */
}
*{ box-sizing:border-box; }
html, body{ height:100%; margin:0; }
body{ font-family:system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; background:var(--bg); color:var(--fg); }

/* ===== Layout: 2 cột — Trái (sidebar + charts), Phải (map card) ===== */
#wrap{
  height:100vh;
  display:grid;
  grid-template-columns: minmax(340px, 1fr) var(--mapW);
  grid-template-areas: "left map";
  gap:0;
}
#leftCol{ grid-area:left; display:flex; flex-direction:column; min-width:0; }
#sidebar{
  background:var(--panel);
  border-right:1px solid #2a2a2a;
  padding:12px 14px;
  overflow:auto;
}
#charts{
  padding:12px 14px;
  display:grid;
  grid-template-columns: 1fr 1fr;
  gap:12px;
}
#chartWrap, #chartWrap2{
  background:#101318; border:1px solid #232a34; border-radius:10px; padding:8px; min-height:240px;
}
#charts canvas{ width:100% !important; height:100% !important; }
.chartTitle{ font-size:12px; color:var(--muted); margin:0 0 6px 4px; }

/* Map card cố định góc phải-trên, cao đến “Tải CSV” */
#map{
  grid-area:map;
  position:sticky; top:0;
  width:100%; height:100%;
  align-self:start; justify-self:end;
  border:1px solid #2a2a2a; border-radius:12px; overflow:hidden;
  box-shadow:0 4px 20px rgba(0,0,0,.35);
  background:#0A0F1A;
}
.leaflet-container{ background:#0A0F1A; }

/* ===== Inputs ===== */
h1{ font-size:16px; margin:6px 0 10px; }
.muted{ color:var(--muted); font-size:12px; }
label{ font-size:13px; display:block; margin-top:10px; }
input, select, button{
  width:100%; padding:8px 10px; background:#0f172a; color:#e5e7eb;
  border:1px solid var(--border); border-radius:10px;
}
input[type="date"]{ color-scheme:dark; }
.row{ display:flex; gap:8px; align-items:center; }
.row > *{ flex:1; }
.btn{ cursor:pointer; }
.btn:hover{ background:#111d36; }
.box{ border:1px solid var(--border); border-radius:12px; padding:10px; margin-top:10px; }
.small{ font-size:12px; }

/* ===== Responsive ===== */
@media (max-width: 980px){
  #wrap{
    grid-template-columns: 1fr;
    grid-template-areas: "left";
    height:auto;
  }
  #map{
    position:static; width:100%; height:60vh; margin:12px 14px; border-radius:10px;
  }
  #charts{ grid-template-columns: 1fr; }
}

#wrap {
  display: flex;
  height: 100vh;
  overflow: hidden;
  position: relative;
}

#leftCol {
  width: 70%;
  background: #1a1a1a;
  color: #fff;
  transition: transform 0.4s ease;
  z-index: 10;
  position: relative;
  box-shadow: 2px 0 8px rgba(0, 0, 0, 0.4);
}

#leftCol.collapsed {
  transform: translateX(-100%);
}

#sidebar {
  padding: 16px;
  height: 100%;
  overflow-y: auto;
}

#toggleSidebar {
  position: absolute;
  top: 12px;
  right: -36px;
  width: 36px;
  height: 36px;
  background: #1a1a1a;
  color: #fff;
  border: none;
  border-radius: 0 6px 6px 0;
  cursor: pointer;
  font-size: 20px;
  z-index: 11;
  transition: background 0.3s;
}
#toggleSidebar:hover {
  background: #333;
}

#map {
  flex: 1;
  background: #111;
  transition: all 0.4s ease;
  width: calc(100% - 320px);
}

#leftCol.collapsed ~ #map {
  width: 100%;
}

#leftCol.collapsed {
  width: 0;
}

#leftCol.collapsed #sidebar,
#leftCol.collapsed #charts {
  display: none;
}
.leaflet-left {
  right: 0 !important;
  left: unset;
}
